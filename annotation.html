<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Annotation Made by AILab</title>
  </head>

  <body>
    <!-- Buttons and Controls -->
    <div class="button-container">
      <button id="selectFolderButton" style="font-size: x-large">
        Select Folder
      </button>
      <button id="prevButton" class="btn hidden">Previous</button>
      <button id="nextButton" class="btn hidden">Next</button>
      <button id="resetViewButton" class="btn hidden">Reset View</button>
      <button id="clearButton" class="btn hidden">Clear</button>
      <button id="undoButton" class="btn hidden">Undo</button>
      <button id="toggleModeButton" class="btn hidden">
        Switch to Bounding Box Mode
      </button>
      <button id="downloadButton" class="btn hidden">Save Annotations</button>
      <button id="loadAnnotationsButton" class="btn hidden">
        Load Annotations
      </button>
      <button id="helpButton" class="btn hidden">?</button>
    </div>

    <div class="button-container">
      <!-- Image Quality Dropdown -->
      <div id="imageQualityDropdownContainer" class="dropdown-container hidden">
        <label for="imageQualityDropdown">Image quality:</label>
        <select id="imageQualityDropdown">
          <option disabled selected value>-- select an option --</option>
          <option value="bad">Bad</option>
          <option value="medium">Medium</option>
          <option value="good">Good</option>
        </select>
      </div>

      <!-- Readability Dropdown -->
      <div id="readabilityDropdownContainer" class="dropdown-container hidden">
        <label for="readabilityDropdown">Text readability:</label>
        <select id="readabilityDropdown">
          <option disabled selected value>-- select an option --</option>
          <option value="Readable">Readable</option>
          <option value="incomplete">Partially hidden</option>
          <option value="un-readable">Un-readable</option>
        </select>
      </div>
    </div>

    <!-- Privacy Note -->
    <p id="privacy" class="privacy-note" style="text-align: center">
      <strong>Privacy note:</strong> The app runs in your browser and no data is
      ever sent. <br />
      You can always disable your internet connection or check the
      <a
        href="https://github.com/franchesoni/minimalist-annotation/blob/main/index.html"
        >source code</a
      >
      if in doubt.
    </p>

    <!-- Canvas Containers -->
    <div id="canvasContainer" class="canvas-container hidden">
      <canvas id="imageCanvas"></canvas>
      <canvas id="maskCanvas"></canvas>
      <canvas id="annCanvas"></canvas>
      <canvas id="tmpCanvas"></canvas>
      <canvas id="crosshairCanvas"></canvas>
    </div>

    <!-- Annotation Description Input -->
    <div class="input-container hidden" id="annotationInputContainer">
      <input
        type="text"
        id="annotationDescription"
        placeholder="Annotation Description"
      />
    </div>

    <!-- Mask Opacity Slider : The Logic is still present in the back but since it's not used, I just commented it until we use it -->
    <!-- <div class="slider-container hidden" id="sliderContainer">
      <label for="alphaSlider">Mask Opacity:</label>
      <input type="range" id="alphaSlider" min="0" max="100" value="30" />
    </div> -->

    <!-- Help Modal -->
    <div id="helpModal" class="modal hidden">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>How to Use This App</h2>
        <section>
          <h3>Visualization</h3>
          <ul>
            <li><strong>Pan:</strong> Drag with left click.</li>
            <li><strong>Zoom:</strong> Scroll mouse wheel.</li>
            <li><strong>Reset View:</strong> Click the "Reset View" button.</li>
            <li>
              <strong>Next Image:</strong> Click `Next` or press `D` or
              `RightArrow`.
            </li>
            <li>
              <strong>Previous Image:</strong> Click `Previous` or press `A` or
              `LeftArrow`.
            </li>
            <li>
              <strong>Overlay Mask:</strong> Save your image as `imgname.jpg`
              with the mask as `imgname_mask.png`.
            </li>
          </ul>
        </section>
        <section>
          <h3>Annotation</h3>
          <ul>
            <li>
              <strong>Switch Mode:</strong> Toggle between point annotation and
              bounding box annotation modes.
            </li>
            <li>
              <strong>Box Annotation:</strong> Use two left clicks per bounding
              box.
            </li>
            <li>
              <strong>Point Annotation:</strong> Use left (positive) and right
              (negative) clicks.
            </li>
            <li>
              <strong>Text Annotation:</strong> Insert or edit the text in the
              textbox.
            </li>
            <li>
              <strong>Delete Annotation:</strong> Click `Undo` to remove the
              last annotation or `Clear` to remove all annotations on the
              current image.
            </li>
            <li>
              <strong>Save/Load:</strong> Save your annotations to a file or
              load previous annotations using `Save` and `Load`.
            </li>
          </ul>
        </section>
        <section>
          <h3>Feedback</h3>
          <p>
            For feedback, visit the
            <a href="https://github.com/franchesoni/minimalist-annotation"
              >repository</a
            >
            or email
            <a href="mailto:marchesoniacland@gmail.com"
              >marchesoniacland@gmail.com</a
            >.
          </p>
        </section>
      </div>
    </div>

    <!-- Hidden Inputs -->
    <input
      type="file"
      id="folderInput"
      class="hidden"
      webkitdirectory
      directory
      multiple
    />
    <input type="file" id="loadFileInput" class="hidden" accept=".json" />

    <script src="logic.js"></script>
  </body>
</html>
